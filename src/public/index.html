<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Select visualisation</title>
</head>
<style>
body {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
  background-color: #F6F7F8;
}

main {
  display: flex;
  width: 100vw;
  height: calc(100vh - 70px);
  justify-content: center;
}

.room-select {
  display: flex;
  justify-content: center;
  flex-direction: column;
  width: 300px;
}

button {
 height:  36px;
 margin:  0px;
 padding: 2px 8px;

 border-width:  0px 2px 2px 0px;
 border-style:  solid;
 border-radius: 2px;
 background-color: #2EC4B6;
 color: #fff;
 font-size:      12px;
 line-height:    32px;
 letter-spacing: 1px;
}

button:disabled {
  opacity: .6;
  pointer-events: none;
}

select {
 height:  36px;
 border-style:  solid;
 border-radius: 2px;
 font-size:      12px;
 line-height:    32px;
}
</style>
<body>
  <main>
    <div class="room-select">
      <h1>Select room</h1>
      <select id="rooms-select" onchange="alert(1)">
        </select>
      <hr/>
      <button id="show-vis" disabled>Show visualisation</button>
    </div>
  </main>
  <script src="./utils.js"> </script>

  <script>
    async function main() {
      const { rooms } = await getAllRooms()
      const select = document.getElementById('rooms-select')
      const btn = document.getElementById('show-vis')
      btn.removeAttribute('disabled')
      btn.onclick = () => {
        const id = select.options[select.selectedIndex].value;
        window.location.href = `./vis/?id=${id}`
      }

      rooms.forEach(r => {
        const option = document.createElement('option');
        option.value = r.id
        option.text = r.name
        select.add(option)
      })
    }

    window.onload = main
  </script>
</body>
</html>
